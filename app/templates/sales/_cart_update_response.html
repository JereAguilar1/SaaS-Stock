{% include 'sales/_cart_line.html' %}

<span id="cart-total-display" hx-swap-oob="true">${{ totals.total|money_ar }}</span>

<!-- Update hidden inputs for payment (split-payment compatible) -->
<input type="hidden" name="payments[0][amount]" id="payment-amount-input-0" value="{{ totals.total }}"
     hx-swap-oob="true">

<!-- Smart Update for Amount Received (payment 1) -->
{% if not session.get('cash_overridden') %}
<!-- If NO override: Sync visible input to new total -->
<input type="text" id="amount_received_1" hx-swap-oob="true" value="{{ (totals.total|round(0, 'ceil'))|int|num_ar }}"
     class="form-control text-end payment-amount-input" inputmode="numeric" placeholder="Monto">

<input type="hidden" name="payments[0][amount_received]" id="payment-received-input-0"
     value="{{ (totals.total|round(0, 'ceil'))|int }}" hx-swap-oob="true">
{% endif %}