{% extends "base.html" %}

{% block title %}Mi Perfil - Sistema de Gestión{% endblock %}

{% block page_title %}Mi Perfil{% endblock %}

{% block topbar_actions %}
<a href="{{ url_for('users.edit_my_profile') }}" class="btn-custom btn-primary-custom">
    <i class="bi bi-pencil"></i> Editar Perfil
</a>
{% endblock %}

{% block content %}
<div style="max-width: 800px; margin: 0 auto;">
    <div class="card-custom">
        <div class="card-body-custom" style="padding: var(--spacing-6);">
            <!-- User Avatar and Basic Info -->
            <div
                style="display: flex; align-items: center; gap: var(--spacing-5); margin-bottom: var(--spacing-6); padding-bottom: var(--spacing-6); border-bottom: 1px solid var(--color-border);">
                <div
                    style="width: 100px; height: 100px; border-radius: 50%; background: linear-gradient(135deg, var(--color-primary), var(--color-primary-dark)); display: flex; align-items: center; justify-content: center; font-size: 2.5rem; font-weight: 600; color: white; flex-shrink: 0;">
                    {{ user.full_name[0] if user.full_name else user.email[0] }}
                </div>
                <div style="flex: 1;">
                    <h2 style="margin: 0 0 var(--spacing-2) 0; font-size: 1.75rem; font-weight: 600;">
                        {{ user.full_name or 'Usuario' }}
                    </h2>
                    <p style="margin: 0; color: var(--color-text-secondary); font-size: 1rem;">
                        <i class="bi bi-envelope"></i> {{ user.email }}
                    </p>
                </div>
            </div>

            <!-- Profile Details -->
            <div style="display: grid; gap: var(--spacing-5);">
                <!-- Full Name -->
                <div>
                    <label
                        style="display: block; font-weight: 600; color: var(--color-text-secondary); font-size: 0.875rem; margin-bottom: var(--spacing-2); text-transform: uppercase; letter-spacing: 0.5px;">
                        Nombre Completo
                    </label>
                    <p style="margin: 0; font-size: 1.125rem; color: var(--color-text-primary);">
                        {{ user.full_name or 'No especificado' }}
                    </p>
                </div>

                <!-- Email -->
                <div>
                    <label
                        style="display: block; font-weight: 600; color: var(--color-text-secondary); font-size: 0.875rem; margin-bottom: var(--spacing-2); text-transform: uppercase; letter-spacing: 0.5px;">
                        Email
                    </label>
                    <p style="margin: 0; font-size: 1.125rem; color: var(--color-text-primary);">
                        {{ user.email }}
                    </p>
                </div>

                <!-- Role -->
                {% if user_tenant %}
                <div>
                    <label
                        style="display: block; font-weight: 600; color: var(--color-text-secondary); font-size: 0.875rem; margin-bottom: var(--spacing-2); text-transform: uppercase; letter-spacing: 0.5px;">
                        Rol
                    </label>
                    <p style="margin: 0; font-size: 1.125rem;">
                        <span class="badge-custom 
                            {% if user_tenant.role == 'OWNER' %}badge-primary-custom
                            {% elif user_tenant.role == 'ADMIN' %}badge-warning-custom
                            {% else %}badge-secondary-custom{% endif %}">
                            {{ user_tenant.role }}
                        </span>
                    </p>
                </div>
                {% endif %}

                <!-- Tenant -->
                {% if g.tenant %}
                <div>
                    <label
                        style="display: block; font-weight: 600; color: var(--color-text-secondary); font-size: 0.875rem; margin-bottom: var(--spacing-2); text-transform: uppercase; letter-spacing: 0.5px;">
                        Negocio
                    </label>
                    <p style="margin: 0; font-size: 1.125rem; color: var(--color-text-primary);">
                        <i class="bi bi-building"></i> {{ g.tenant.name }}
                    </p>
                </div>
                {% endif %}

                <!-- Auth Provider -->
                <div>
                    <label
                        style="display: block; font-weight: 600; color: var(--color-text-secondary); font-size: 0.875rem; margin-bottom: var(--spacing-2); text-transform: uppercase; letter-spacing: 0.5px;">
                        Método de Autenticación
                    </label>
                    <p style="margin: 0; font-size: 1.125rem; color: var(--color-text-primary);">
                        {% if user.auth_provider == 'google' %}
                        <i class="bi bi-google"></i> Google
                        {% else %}
                        <i class="bi bi-envelope-fill"></i> Email/Contraseña
                        {% endif %}
                    </p>
                </div>

                <!-- Member Since -->
                <div>
                    <label
                        style="display: block; font-weight: 600; color: var(--color-text-secondary); font-size: 0.875rem; margin-bottom: var(--spacing-2); text-transform: uppercase; letter-spacing: 0.5px;">
                        Miembro Desde
                    </label>
                    <p style="margin: 0; font-size: 1.125rem; color: var(--color-text-primary);">
                        <i class="bi bi-calendar"></i> {{ user.created_at.strftime('%d/%m/%Y') if user.created_at else
                        'N/A' }}
                    </p>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}